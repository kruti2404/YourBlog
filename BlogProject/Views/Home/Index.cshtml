@model IEnumerable<Blogs>
@{
	ViewData["Title"] = "Home Page";

}

@if (Model != null && Model.Any())
{

	<link rel="stylesheet" href="@Url.Content("~/css/HomeIndex.css")" />

	<div class="text-center">
		<h2 class="display-4">Welcome</h2>

		<h4 class="text-center my-4">Latest Blog Posts</h4>
		<form asp-action="Index" asp-controller="Home" method="get">
			<div class="row justify-content-center m-4">
				<div class="search-container">
					<input type="text" class="form-control search-input" placeholder="Search..." name="SearchTerm" value="@ViewData["SearchTerm"]" />
					<i class="fas fa-search search-icon"></i>
				</div>
			</div>
		</form>
		<div class="container">
			<div class="row">
				@foreach (var blog in Model)
				{
					<div class="col-md-4 mb-4">
						<div class="card shadow-sm">
							@if (blog.Image != null)
							{
								<img src="data:image/jpeg;base64,@(Convert.ToBase64String(blog.Image))" class="card-img-top" alt="Blog Image">
							}
							<div class="card-body">
								<h5 class="card-title">@blog.Title</h5>
								<p class="card-text text-muted">
									@if (blog.Content.Length > 100)
									{
										@blog.Content.Substring(0, 100)

										<span>...</span>
									}
									else
									{
										@blog.Content
									}
								</p>
								<p>
									<strong>Genres:</strong>
									@if (blog.Genres.Any())
									{
										@foreach (var genre in blog.Genres)
										{
											<span class="badge bg-primary">@genre.Name</span>
										}
									}
									else
									{
										<span class="text-muted">No genre assigned</span>
									}
								</p>
								<a asp-controller="Home" asp-action="Details" asp-route-id="@blog.Id" class="btn btn-outline-primary">Read More</a>
							</div>
						</div>
					</div>
				}
			</div>
		</div>
	</div>

}
else
{
	<link rel="stylesheet" href="@Url.Content("~/css/HomeIndex.css")" />

	<div class="text-center">
		<h2 class="display-4">Welcome</h2>

		<h4 class="text-center my-4">Latest Blog Posts</h4>
		<form asp-action="Index" asp-controller="Home" method="get">
			<div class="row justify-content-center m-4">
				<div class="search-container">
					<input type="text" class="form-control search-input" placeholder="Search..." name="SearchTerm" value="@ViewData["SearchTerm"]" />
					<i class="fas fa-search search-icon"></i>
				</div>
			</div>
		</form>
		<div class="container">
			<div class="row">
				<h4>No data Exists for this Search </h4>
			</div>
		</div>
	</div>
}